@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  ::selection {
    @apply bg-brand-500 text-text-950;
  }

  button,
  a {
    @apply focus-visible:outline-offset-2;
  }
}

@layer components {
  /* PAGE WRAPPER */
  .mdx-page-wrapper {
    @apply relative z-40 mb-20 grid;
    grid-template-columns: 300px 1fr;
    grid-template-rows: auto 1fr auto;
    grid-auto-columns: minmax((0, fr));
    grid-auto-rows: 1fr;
    grid-auto-flow: row;
    grid-template-areas:
      'aside aside'
      'main main';
  }

  @media screen and (min-width: theme('screens.md')) {
    .mdx-page-wrapper {
      grid-template-columns: 270px 1fr;
      grid-template-rows: auto 1fr;
      grid-template-areas:
        'aside main'
        'aside main';
    }
  }

  /* ASIDE */
  .mdx-aside-wrapper {
    @apply sticky left-0 right-0 top-12 bg-white;
    @apply md:relative md:inset-0 md:mb-1 md:min-h-[calc(100svh-64px)];
    grid-area: aside;
  }

  /* MAIN*/
  .mdx-main-wrapper {
    @apply mb-2 bg-white;
    @apply md:mb-1;
    grid-area: main;
  }

  /* .mdx-main-wrapper div {
    & section,
    & dl {
      @apply animate-fadeInLinear;
      animation-timeline: view();
    }
  } */

  /* FOOTER */
  .footer-wrapper {
    @apply fixed bottom-0 left-0 right-0 z-30;
  }

  .footer {
    @apply relative;
  }

  .footer {
    & strong,
    & a {
      @apply font-semibold;
    }

    & a {
      @apply text-brand-800;
    }

    & a:hover {
      @apply text-brand-700;
    }

    & abbr {
      @apply no-underline;
    }

    & > .footer-content-wrapper {
      @apply prose prose-sm mx-auto grow;
    }
  }

  .footer-content-wrapper .not-prose {
    @apply text-xs;
  }

  /* HAMBURGER */
  .hamburger.cross > .hamburger-line:nth-of-type(1) {
    @apply animate-hamburger-close-1;
  }

  .hamburger.cross > .hamburger-line:nth-of-type(2) {
    @apply animate-hamburger-close-2;
  }

  .hamburger.cross > .hamburger-line:nth-of-type(3) {
    @apply animate-hamburger-close-3;
  }

  .hamburger.bars > .hamburger-line:nth-of-type(1) {
    @apply animate-hamburger-open-1;
  }

  .hamburger.bars > .hamburger-line:nth-of-type(2) {
    @apply animate-hamburger-open-2;
  }

  .hamburger.bars > .hamburger-line:nth-of-type(3) {
    @apply animate-hamburger-open-3;
  }

  .hamburger-line {
    @apply h-[0.125rem] w-6 rounded-sm bg-text-500 duration-600 will-change-transform;
    &:not(:first-of-type) {
      @apply mt-[0.4375rem];
    }

    &:nth-of-type(2) {
      @apply will-change-[opacity];
    }
  }

  /* NAVIGATION */
  .nav-main {
    @apply fixed -right-[100%]  left-[100%] top-0 z-50 flex min-h-[100svh] flex-col justify-between;
    @apply bg-brand-500 px-[0.875rem] transition-all duration-650;
    @apply md:relative md:inset-[unset] md:top-0 md:ml-auto md:min-h-[unset] md:flex-row md:items-center md:gap-4;
    @apply md:bg-transparent md:px-0 md:duration-0;
  }

  .nav-main.open {
    @apply left-[20%] right-0 sm:left-[35%];
  }

  .nav-links-main {
    @apply pointer-events-none flex  flex-col gap-[0.875rem] text-[0.875rem];
    @apply md:pointer-events-auto md:flex-row md:gap-6;
  }

  .nav-links-social {
    @apply pointer-events-none mb-8 mt-auto flex flex-row items-center gap-2;
    @apply md:pointer-events-auto md:mb-0 md:mt-0;
  }

  .nav-main.open .nav-links-main,
  .nav-main.open .nav-links-social {
    @apply pointer-events-auto;
  }

  /* NAV LINK */
  .nav-link {
    @apply inline-flex text-sm font-medium leading-[1.875rem];
    @apply text-text-500 transition-[box-shadow] duration-367;
    @apply hover:text-text-400 hover:shadow-nav-link;
  }

  .nav-link.active {
    @apply text-text-500 shadow-nav-link;
  }

  /* MDX */
  .icon.icon-link {
    @apply relative;
  }

  .icon.icon-link::before {
    @apply absolute -left-5 top-0  opacity-0 transition-opacity duration-367;
    content: url(/assets/svg/hash.svg); /* tw class: content-[url(/assets/svg/icon-link.svg)] */
    @apply group-hover/heading:opacity-100; /* mdx headings have class group/heading */
    @apply fill-text-200 text-text-200;
  }
}
